<style>

  body {
    font-family: Garamond, serif;
    text-align: center;
    background: linear-gradient(to bottom, #ebebde, #31f8ff);
    margin: 0;
    padding: 0 10px 40px;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    justify-content: flex-start;
  }

  h1 {
    margin-top: 40px;
    font-size: 2.2rem;
    letter-spacing: 1px;
    color: #222;
  }

  /* ===== CONTENEDOR GENERAL ===== */
  #dashboard {
    display: none;
    margin-top: 20px;
  }

  /* ===== TARJETAS ===== */
  .relay-card {
    display: inline-block;
    background: rgba(255, 255, 255, 0.95);
    padding: 30px 20px;
    margin: 18px;
    border-radius: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.08);
    width: 240px;
    vertical-align: top;
    text-align: center;
    transition: all 0.3s ease;
  }

  .relay-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 35px rgba(0,0,0,0.12);
  }

  .relay-card h2 {
    margin-bottom: 12px;
    font-size: 1.4rem;
    color: #333;
  }

  .relay-card p {
    margin-bottom: 18px;
    font-size: 1.2rem;
    font-weight: bold;
    transition: 0.3s ease;
  }

  /* ===== ESTADOS ===== */
  .on {
    color: #2994dc; /* azul hielo */
    text-shadow: 0 0 8px rgba(97, 224, 250, 0.886);
  }

  .off {
    color: #555; 
  }

  /* ===== BOTONES RELAY ===== */
  .relay-card button {
    padding: 12px 20px;
    border: none;
    border-radius: 10px;
    font-size: 16px;
    width: 95%;
    cursor: pointer;
    background-color: #42cefd; /* azul hielo por defecto (OFF) */
    color: black;
    font-weight: bold;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(0,0,0,0.06);
  }

  .relay-card button:hover {
    transform: scale(1.05);
    box-shadow: 0 6px 18px rgba(0,0,0,0.09);
  }

  /* ===== BOTONES GENERALES ===== */
  #allOnBtn, #allOffBtn, #logoutBtn {
    max-width: 320px;
    width: 90%;
    padding: 14px 25px;
    font-size: 17px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    margin: 12px auto;
    display: block;
    font-family: Garamond, serif;
    font-weight: bold;
    transition: 0.3s ease;
  }

  #allOnBtn {
    background-color: #2ded27;
    color: black;
    box-shadow: 0 4px 12px rgba(45,237,39,0.3);
  }

  #allOnBtn:hover {
    transform: scale(1.05);
  }

  #allOffBtn {
    background-color: #d32f2f;
    color: white;
    box-shadow: 0 4px 12px rgba(211,47,47,0.3);
  }

  #allOffBtn:hover {
    transform: scale(1.05);
  }

  #logoutBtn {
    background-color: #444;
    color: white;
  }

  #logoutBtn:hover {
    background-color: #222;
  }

  /* ===== LOGIN ===== */
  #loginForm {
    max-width: 420px;
    margin: auto;
    background: white;
    padding: 35px 25px;
    border-radius: 20px;
    box-shadow: 0 15px 35px rgba(0,0,0,0.08);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
  }

  #loginForm h2 {
    margin-bottom: 20px;
  }

  #loginForm input {
    width: 90%;
    padding: 14px 15px;
    margin: 0;
    font-size: 1rem;
    border: 1px solid #ddd;
    border-radius: 10px;
    font-family: Garamond, serif;
    transition: 0.3s ease;
  }

  #loginForm input:focus {
    border-color: #51ff4b;
    outline: none;
    box-shadow: 0 0 8px rgba(45,237,39,0.3);
  }

  #loginForm button {
    width: 100%;
    background-color: #51ff4b;
    color: black;
    padding: 14px;
    font-size: 18px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-family: Garamond, serif;
    font-weight: bold;
    transition: 0.3s ease;
  }

  #loginForm button:hover {
    transform: scale(1.03);
  }

  footer {
    font-size: 0.9rem;
    color: #666;
    padding: 15px 0;
    margin-top: 40px;
    text-align: center;
  }

  /* ===== RESPONSIVE ===== */
  @media (max-width: 700px) {
    .relay-card {
      width: 95%;
      margin: 15px auto;
      display: block;
    }
  }

</style>

  <h1>CASA DE OYACOTO</h1>

  <!-- Login form -->
  <div id="loginForm">
    <input type="email" id="email" placeholder="Enter Email" required />
    <input type="password" id="password" placeholder="Enter Password" required />
    <button id="loginBtn">Login</button>
  </div>

  <!-- Dashboard -->
  <div id="dashboard">
    <div class="relay-container">
      <div class="relay-card">
        <h2>SALA</h2>
        <p>Status: <span id="status1">Loading...</span></p>
        <button id="btn1">ESTADO</button>
      </div>
      <div class="relay-card">
        <h2>COMEDOR</h2>
        <p>Status: <span id="status2">Loading...</span></p>
        <button id="btn2">ESTADO</button>
      </div>
      <div class="relay-card">
        <h2>COCINA</h2>
        <p>Status: <span id="status3">Loading...</span></p>
        <button id="btn3">ESTADO</button>
      </div>
      <div class="relay-card">
        <h2>DUCHA</h2>
        <p>Status: <span id="status4">Loading...</span></p>
        <button id="btn4">ESTADO</button>
      </div>
      <div class="relay-card">
        <h2>HABITACION</h2>
        <p>Status: <span id="status5">Loading...</span></p>
        <button id="btn5">ESTADO</button>
      </div>
      <div class="relay-card">
        <h2>LUZ_EXTERIOR</h2>
        <p>Status: <span id="status6">Loading...</span></p>
        <button id="btn6">ESTADO</button>
      </div>
      <div class="relay-card">
        <h2>CAMARA</h2>
        <p>Status: <span id="status7">Loading...</span></p>
        <button id="btn7">ESTADO</button>
      </div>
      <div class="relay-card">
        <h2>INTERRUPTORES</h2>
        <p>Status: <span id="status8">Loading...</span></p>
        <button id="btn8">ESTADO</button>
      </div>
    </div>

    <div class="controls-row">
      <div class="all-controls">
        <button id="allOffBtn">APAGAR TODO</button>
        <button id="allOnBtn">ENCENDER TODO</button>
      </div>
      <button id="logoutBtn">CERRAR SESION</button>
    </div>
  </div>

  <footer>FAMILIA VEGA-SALAZAR</footer>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>

  <script>
    // Firebase config
   const firebaseConfig = {
    apiKey: "AIzaSyDo0G2-ZTo_MRvhFXKMFmWuvNOP90UgGu8",
    authDomain: "casa-oyacoto-d5484.firebaseapp.com",
    databaseURL: "https://casa-oyacoto-d5484-default-rtdb.firebaseio.com",
    projectId: "casa-oyacoto-d5484",
    storageBucket: "casa-oyacoto-d5484.firebasestorage.app",
    messagingSenderId: "259815798229",
    appId: "1:259815798229:web:2106bfa82d7973d137b95c"
  };

    firebase.initializeApp(firebaseConfig);

    const allowedEmail = "familia123@gmail.com";
    const allowedPassword = "0981276463321";

    const loginForm = document.getElementById("loginForm");
    const dashboard = document.getElementById("dashboard");
    const loginBtn = document.getElementById("loginBtn");

    loginBtn.addEventListener("click", () => {
      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value;
      if (!email || !password) { alert("Please enter email and password."); return; }
      if (email === allowedEmail && password === allowedPassword) {
        firebase.auth().signInWithEmailAndPassword(email, password)
          .then(userCredential => {
            loginForm.style.display = "none";
            dashboard.style.display = "block";
            initializeRelaysInDatabase();
            startRelayControl();
          })
          .catch(error => alert("Firebase login failed: " + error.message));
      } else {
        alert("Invalid email or password.");
      }
    });

    function startRelayControl() {
      const db = firebase.database();
      const relays = [
        { id: 1, path: "SALA" },{ id: 2, path: "COMEDOR" },{ id: 3, path: "COCINA" },{ id: 4, path: "DUCHA" },
        { id: 5, path: "HABITACION" },{ id: 6, path: "LUZ_EXTERIOR" },{ id: 7, path: "CAMARA" },{ id: 8, path: "INTERRUPTORES" },
      ];

      relays.forEach(relay => {
        const statusText = document.getElementById(`status${relay.id}`);
        const toggleButton = document.getElementById(`btn${relay.id}`);
        const relayRef = db.ref("/" + relay.path);

        relayRef.on("value", (snapshot) => {
          const state = snapshot.val();
          statusText.innerText = state ? "ON" : "OFF";
          toggleButton.style.backgroundColor = state ? "#2ded27" : "#bfefff";
        });

        toggleButton.onclick = () => { relayRef.once('value').then(snap => relayRef.set(!snap.val())); };
      });

      document.getElementById("allOffBtn").onclick = () => { relays.forEach(relay => db.ref("/" + relay.path).set(false)); };
      document.getElementById("allOnBtn").onclick = () => { relays.forEach(relay => db.ref("/" + relay.path).set(true)); };
    }

    // Initialize relays structure in database
    function initializeRelaysInDatabase() {
      const db = firebase.database();
      const relayNames = ["SALA", "COMEDOR", "COCINA", "DUCHA", "HABITACION", "LUZ_EXTERIOR", "CAMARA", "INTERRUPTORES"];
      
      // Create all relays in database directly
      relayNames.forEach(name => {
        db.ref("/" + name).set(false, (error) => {
          if (error) {
            console.error("Error creating relay " + name + ": " + error.message);
          } else {
            console.log("Relay " + name + " created successfully");
          }
        });
      });
    }

    document.getElementById("logoutBtn").onclick = () => {
      firebase.auth().signOut().then(() => {
        dashboard.style.display = "none";
        loginForm.style.display = "block";
        document.getElementById("email").value = "";
        document.getElementById("password").value = "";
      }).catch(error => alert("Logout failed: " + error.message));
    };
  </script>
</body>
</html>
